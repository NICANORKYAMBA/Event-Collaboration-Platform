<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Attendees</title>
    <!-- Link to your external CSS file or add your CSS styles here -->
    <link rel="stylesheet" href="../assets/styles/attendees.css">
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="logo"><a href="#">EventHub</a></div>
            <ul class="nav-links">
                <li><a href="#">Home</a></li>
                <li><a href="#">Dashboard</a></li>
                <li><a href="create-event.html">Create Event</a></li>
                <li><a href="#">Profile</a></li>
                <li><a href="#">Logout</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="event-attendees">
            <h1 class="attendees-title">Event Attendees</h1>
            <ul class="attendees-list">
                <li class="attendee-item">
                    <div class="attendee-avatar">
                        <img src="avatar1.jpg" alt="Attendee Avatar">
                    </div>
                    <div class="attendee-details">
                        <h2 class="attendee-name">John Doe</h2>
                        <p class="attendee-email">Email: john@example.com</p>
                    </div>
                </li>
                <li class="attendee-item">
                    <div class="attendee-avatar">
                        <img src="avatar2.jpg" alt="Attendee Avatar">
                    </div>
                    <div class="attendee-details">
                        <h2 class="attendee-name">Jane Smith</h2>
                        <p class="attendee-email">Email: jane@example.com</p>
                    </div>
                </li>
                <!-- Add more attendees as needed -->
            </ul>
        </section>
    </main>

    <footer class="footer">
        &copy; 2023 Your Event Website
    </footer>
    
    <script>
  document.addEventListener("DOMContentLoaded", () => {
    // Get a reference to the attendees list element
    const attendeesList = document.querySelector(".attendees-list");

    // Get the JWT token from sessionStorage
    const jwtToken = sessionStorage.getItem("jwtToken");

    // Replace 'YOUR_BACKEND_API_URL' with the actual URL of your backend API
    const apiUrl = `http://localhost:5000/api/v1/event-attendees/${eventId}/attendees`; // Replace 'eventId' with the actual event ID

    // Fetch the list of attendees from the backend
    fetch(apiUrl, {
      method: "GET",
      headers: {
        "Authorization": `Bearer ${jwtToken}`, // Include the JWT token in the request header
      },
    })
      .then((response) => {
        if (response.ok) {
          return response.json();
        } else {
          throw new Error("Failed to fetch attendees");
        }
      })
      .then((data) => {
        // Loop through the attendees and dynamically create list items
        data.attendees.forEach((attendee) => {
          const attendeeItem = document.createElement("li");
          attendeeItem.className = "attendee-item";

          const attendeeAvatar = document.createElement("div");
          attendeeAvatar.className = "attendee-avatar";
          const avatarImg = document.createElement("img");
          avatarImg.src = attendee.avatarUrl; // Replace with the URL of the attendee's avatar
          avatarImg.alt = "Attendee Avatar";
          attendeeAvatar.appendChild(avatarImg);

          const attendeeDetails = document.createElement("div");
          attendeeDetails.className = "attendee-details";
          const attendeeName = document.createElement("h2");
          attendeeName.className = "attendee-name";
          attendeeName.textContent = attendee.name; // Replace with the attendee's name
          const attendeeEmail = document.createElement("p");
          attendeeEmail.className = "attendee-email";
          attendeeEmail.textContent = `Email: ${attendee.email}`; // Replace with the attendee's email
          attendeeDetails.appendChild(attendeeName);
          attendeeDetails.appendChild(attendeeEmail);

          attendeeItem.appendChild(attendeeAvatar);
          attendeeItem.appendChild(attendeeDetails);

          attendeesList.appendChild(attendeeItem);
        });
      })
      .catch((error) => {
        console.error("Error fetching attendees:", error);
      });
  });
</script>

</body>
</html>
